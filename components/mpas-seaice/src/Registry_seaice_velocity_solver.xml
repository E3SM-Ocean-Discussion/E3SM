
	<nml_record name="velocity_solver" in_defaults="true">
		<nml_option name="config_dynamics_subcycle_number" type="integer" default_value="1" units="unitless"
			description="The number of dynamics subcycles to perform per thermodynamic time step (config_dt)"
			possible_values="Any positive integer."
		/>
		<nml_option name="config_rotate_cartesian_grid" type="logical" default_value="true" units="unitless"
			description="Rotate the velocity directions from geographic so their pole lies on the equator."
			possible_values="true or. false."
		/>
		<nml_option name="config_include_metric_terms" type="logical" default_value="true" units="unitless"
			description="Include metric terms due to Earth curvature in velocity solver horizontal operators."
			possible_values="true or. false."
		/>
		<nml_option name="config_elastic_subcycle_number" type="integer" default_value="120" units="unitless"
			description="The number of elastic EVP subcycles to perform per dynamics time step."
			possible_values="Any positive integer."
		/>
		<nml_option name="config_strain_scheme" type="character" default_value="variational" units="unitless"
			description="Choice of stress divergence scheme to use in the velocity solver."
			possible_values="'weak', or 'variational'"
		/>
		<nml_option name="config_constitutive_relation_type" type="character" default_value="evp" units="unitless"
			description="Choice of constitutive relation to use in the velocity solver."
			possible_values="'evp', 'evp_revised', 'linear', or 'none'"
		/>
		<nml_option name="config_stress_divergence_scheme" type="character" default_value="variational" units="unitless"
			description="Choice of stress divergence scheme to use in the velocity solver."
			possible_values="'weak', or 'variational'"
		/>
		<nml_option name="config_variational_basis" type="character" default_value="wachspress" units="unitless"
			description="Type of basis functions to use with the variational stress divergence scheme."
			possible_values="'wachspress' or 'pwl'"
		/>
		<nml_option name="config_variational_denominator_type" type="character" default_value="original" units="unitless"
			description="Type of denominator in variational calculation."
			possible_values="'original' or 'alternate'"
		/>
		<nml_option name="config_wachspress_integration_type" type="character" default_value="dunavant" units="unitless"
			description="Type of integration to perform with the Wachspress variational stress divergence scheme."
			possible_values="'trapezoidal', 'dunavant' or 'fekete'"
		/>
		<nml_option name="config_wachspress_integration_order" type="integer" default_value="8" units="unitless"
			description="Order of integration for Wachspress basis integrations."
			possible_values="'trapezoidal': any positive integer, 'dunavant':1-10,12, 'fekete':1-6,8,9"
		/>
		<nml_option name="config_calc_velocity_masks" type="logical" default_value="true" units="unitless"
			description="Calculate velocity masks."
			possible_values="true or false"
		/>
		<nml_option name="config_average_variational_strain" type="logical" default_value="false" units="unitless"
			description="Average variational strains over vertex."
			possible_values="true or false"
		/>
		<nml_option name="config_use_air_stress" type="logical" default_value="true" units="unitless"
			description="If true include the air stress term in the velocity solver calculations."
			possible_values="true or. false."
		/>
		<nml_option name="config_use_ocean_stress" type="logical" default_value="true" units="unitless"
			description="If true include the ocean stress term in the velocity solver calculations."
			possible_values="true or. false."
		/>
		<nml_option name="config_use_surface_tilt" type="logical" default_value="true" units="unitless"
			description="If true include the sea surface tilt stress term in the velocity solver calculations."
			possible_values="true or. false."
		/>
		<nml_option name="config_geostrophic_surface_tilt" type="logical" default_value="true" units="unitless"
			description="If true calculate the sea surface tilt stress assuming currents are geostrophic."
			possible_values="true or. false."
		/>
		<nml_option name="config_ocean_stress_type" type="character" default_value="quadratic" units="unitless"
			description="Method for calculating ocean stress."
			possible_values="'linear', or 'quadratic'"
		/>
		<nml_option name="config_use_special_boundaries_velocity" type="logical" default_value="false" units="unitless"
			description="Use the special boundaries velocities option."
			possible_values="true or false"
		/>
		<nml_option name="config_use_special_boundaries_velocity_masks" type="logical" default_value="false" units="unitless"
			description="Use the special boundaries velocity mask option."
			possible_values="true or false"
		/>
	</nml_record>

        <packages>

		<!-- dynamics packages -->
		<package name="pkgWeak" description=""/>
		<package name="pkgVariational" description=""/>
		<package name="pkgWeakVariational" description=""/>

	</packages>

        <!-- velocity solver -->
	<var_struct name="velocity_solver" time_levs="1">
		<var name="dynamicsTimeStep"
		     type="real"
		     dimensions=""
		     units="s"
		/>
		<var name="elasticTimeStep"
		     type="real"
		     dimensions=""
		     units="s"
		/>
		<var name="uVelocity"
		     type="real"
		     dimensions="nVertices Time"
		     units="m s-1"
		/>
		<var name="vVelocity"
		     type="real"
		     dimensions="nVertices Time"
		     units="m s-1"
		/>
		<var name="uVelocityCell"
		     type="real"
		     dimensions="nCells Time"
		     units="m s-1"
		/>
		<var name="vVelocityCell"
		     type="real"
		     dimensions="nCells Time"
		     units="m s-1"
		/>
		<var name="uVelocityInitial"
		     type="real"
		     dimensions="nVertices Time"
		     units="m s-1"
		/>
		<var name="vVelocityInitial"
		     type="real"
		     dimensions="nVertices Time"
		     units="m s-1"
		/>
		<var name="edgeVelocity"
		     type="real"
		     dimensions="nEdges Time"
		     units="m s-1"
		/>
		<var name="normalVectorEdge"
		     type="real"
		     dimensions="TWO maxEdges nCells Time"
		/>
		<var name="solveStress"
		     type="integer"
		     dimensions="nCells Time"
		/>
		<var name="solveVelocity"
		     type="integer"
		     dimensions="nVertices Time"
		     />
		<var name="solveVelocityPrevious"
		     type="integer"
		     dimensions="nVertices Time"
		/>
		<var name="icePressure"
		     type="real"
		     dimensions="nCells Time"
		     units="N m-1"
		/>
		<var name="stressDivergenceU"
		     type="real"
		     dimensions="nVertices Time"
		     units="N m-2"
		/>
		<var name="stressDivergenceV"
		     type="real"
		     dimensions="nVertices Time"
		     units="N m-2"
		/>
		<var name="airStressCellU"
		     type="real"
		     dimensions="nCells Time"
		     units="N m-2"
		/>
		<var name="airStressCellV"
		     type="real"
		     dimensions="nCells Time"
		     units="N m-2"
		/>
		<var name="airStressVertexU"
		     type="real"
		     dimensions="nVertices Time"
		     units="N m-2"
		/>
		<var name="airStressVertexV"
		     type="real"
		     dimensions="nVertices Time"
		     units="N m-2"
		/>
		<var name="uOceanVelocityVertex"
		     type="real"
		     dimensions="nVertices Time"
		     units="m s-1"
		/>
		<var name="vOceanVelocityVertex"
		     type="real"
		     dimensions="nVertices Time"
		     units="m s-1"
		/>
		<var name="oceanStressU"
		     type="real"
		     dimensions="nVertices Time"
		     units="N m-2"
		/>
		<var name="oceanStressV"
		     type="real"
		     dimensions="nVertices Time"
		     units="N m-2"
		/>
		<var name="oceanStressCoeff"
		     type="real"
		     dimensions="nVertices Time"
		     units="N s m-1"
		/>
		<var name="oceanStressCellU"
		     type="real"
		     dimensions="nCells Time"
		     units="N m-2"
		/>
		<var name="oceanStressCellV"
		     type="real"
		     dimensions="nCells Time"
		     units="N m-2"
		/>
		<var name="seaSurfaceTiltVertexU"
		     type="real"
		     dimensions="nVertices Time"
		     units="1"
		/>
		<var name="seaSurfaceTiltVertexV"
		     type="real"
		     dimensions="nVertices Time"
		     units="1"
		/>
		<var name="surfaceTiltForceU"
		     type="real"
		     dimensions="nVertices Time"
		     units="N m-2"
		/>
		<var name="surfaceTiltForceV"
		     type="real"
		     dimensions="nVertices Time"
		     units="N m-2"
		/>
		<var name="totalMassVertexfVertex"
		     type="real"
		     dimensions="nVertices Time"
		     units="kg m-2 s-1"
		/>
		<var name="divergence"
		     type="real"
		     dimensions="nCells Time"
		     units="percent day-1"
		/>
		<var name="shear"
		     type="real"
		     dimensions="nCells Time"
		     units="percent day-1"
		/>
		<var name="dynamicallyLockedCellsMask"
		     type="integer"
		     dimensions="nCells Time"
		/>
	</var_struct>

	<!-- weak formulation -->
	<var_struct name="velocity_weak" time_levs="1" packages="pkgWeak">
		<var name="normalVectorPolygon"
		     type="real"
		     dimensions="TWO maxEdges nCells"
		/>
		<var name="normalVectorTriangle"
		     type="real"
		     dimensions="TWO vertexDegree nVertices"
		/>
		<var name="latCellRotated"
		     type="real"
		     dimensions="nCells"
		     units="radians"
		/>
		<var name="latVertexRotated"
		     type="real"
		     dimensions="nVertices"
		     units="radians"
		/>
		<var name="strain11weak"
		     type="real"
		     dimensions="nCells Time"
		     units="s-1"
		     name_in_code="strain11"
		/>
		<var name="strain22weak"
		     type="real"
		     dimensions="nCells Time"
		     units="s-1"
		     name_in_code="strain22"
		/>
		<var name="strain12weak"
		     type="real"
		     dimensions="nCells Time"
		     units="s-1"
		     name_in_code="strain12"
		/>
		<var name="stress11weak"
		     type="real"
		     dimensions="nCells Time"
		     units="N m-1"
		     name_in_code="stress11"
		/>
		<var name="stress22weak"
		     type="real"
		     dimensions="nCells Time"
		     units="N m-1"
		     name_in_code="stress22"
		/>
		<var name="stress12weak"
		     type="real"
		     dimensions="nCells Time"
		     units="N m-1"
		     name_in_code="stress12"
		/>
		<var name="principalStress1Weak"
		     type="real"
		     dimensions="nCells Time"
		     units="N m-1"
		     name_in_code="principalStress1"
		/>
		<var name="principalStress2Weak"
		     type="real"
		     dimensions="nCells Time"
		     units="N m-1"
		     name_in_code="principalStress2"
		/>
		<var name="replacementPressureWeak"
		     type="real"
		     dimensions="nCells Time"
		     units="N m-1"
		     name_in_code="replacementPressure"
		/>
	</var_struct>

	<!-- variational formulation -->
	<var_struct name="velocity_variational" time_levs="1" packages="pkgVariational">
		<var name="strain11var"
		     type="real"
		     dimensions="maxEdges nCells Time"
		     units="s-1"
		     name_in_code="strain11"
		/>
		<var name="strain22var"
		     type="real"
		     dimensions="maxEdges nCells Time"
		     units="s-1"
		     name_in_code="strain22"
		/>
		<var name="strain12var"
		     type="real"
		     dimensions="maxEdges nCells Time"
		     units="s-1"
		     name_in_code="strain12"
		/>
		<var name="stress11var"
		     type="real"
		     dimensions="maxEdges nCells Time"
		     units="N m-1"
		     name_in_code="stress11"
		/>
		<var name="stress22var"
		     type="real"
		     dimensions="maxEdges nCells Time"
		     units="N m-1"
		     name_in_code="stress22"
		/>
		<var name="stress12var"
		     type="real"
		     dimensions="maxEdges nCells Time"
		     units="N m-1"
		     name_in_code="stress12"
		/>
		<var name="tanLatVertexRotatedOverRadius"
		     type="real"
		     dimensions="nVertices"
		/>
		<var name="cellVerticesAtVertex"
		     type="integer"
		     dimensions="vertexDegree nVertices"
		/>
		<var name="basisIntegralsU"
		     type="real"
		     dimensions="maxEdges maxEdges nCells"
		     units="m"
		/>
		<var name="basisIntegralsV"
		     type="real"
		     dimensions="maxEdges maxEdges nCells"
		     units="m"
		/>
		<var name="basisIntegralsMetric"
		     type="real"
		     dimensions="maxEdges maxEdges nCells"
		     units="m2"
		/>
		<var name="basisGradientU"
		     type="real"
		     dimensions="maxEdges maxEdges nCells"
		     units="m-1"
		/>
		<var name="basisGradientV"
		     type="real"
		     dimensions="maxEdges maxEdges nCells"
		     units="m-1"
		/>
		<var name="principalStress1Var"
		     type="real"
		     dimensions="maxEdges nCells Time"
		     units="N m-1"
		     name_in_code="principalStress1"
		/>
		<var name="principalStress2Var"
		     type="real"
		     dimensions="maxEdges nCells Time"
		     units="N m-1"
		     name_in_code="principalStress2"
		/>
		<var name="replacementPressureVar"
		     type="real"
		     dimensions="maxEdges nCells Time"
		     units="N m-1"
		     name_in_code="replacementPressure"
		/>
		<var name="variationalDenominator"
		     type="real"
		     dimensions="nVertices"
		     units="m2"
		/>
	</var_struct>

	<!-- weak strain / variational stress divergence -->
	<var_struct name="velocity_weak_variational" time_levs="1" packages="pkgWeakVariational">
		<var name="strain11Vertex"
		     type="real"
		     dimensions="nVertices Time"
		     units="s-1"
		/>
		<var name="strain22Vertex"
		     type="real"
		     dimensions="nVertices Time"
		     units="s-1"
		/>
		<var name="strain12Vertex"
		     type="real"
		     dimensions="nVertices Time"
		     units="s-1"
		/>
	</var_struct>
